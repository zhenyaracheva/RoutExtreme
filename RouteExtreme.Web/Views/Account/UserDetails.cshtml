@using RouteExtreme.Web.Controllers;
@using Microsoft.AspNet.Identity;

@model RouteExtreme.Web.Models.AccountViewModels.UserDetailsViewModel

@{
    var pic = ((BaseController)this.ViewContext.Controller).GetUserPictureId(this.User.Identity.GetUserId());
}

<div class="container">
    <div class="row center">
        <br />
        @if (this.User.Identity.IsAuthenticated)
        {
            <div class="myBox container">
                <div class="col-md-3 col-md-offset-1">
                    <div class="myBox">
                        @if (pic > 0)
                        {
                            <img src="@Url.Action("GetImage", "Image", new { id = Model.ProfilePicId })" alt="@Model.UserName" class="profilePicture img-responsive" />
                        }
                        else
                        {
                            <img src="https://lh4.googleusercontent.com/-mgfTo5JzHi4/U-RT9DzzD9I/AAAAAAAAAWE/cHmSDDtjCvE/default_profile_image.png" class="centered-profile-image" />
                        }
                    </div>
                </div>
                <div class="col-md-3 text-left col-md-offset-1">
                    <div class="row">
                        @Html.LabelFor(model => model.UserName):
                        @Html.DisplayTextFor(m => m.UserName)
                    </div>
                    <div class="row">
                        @Html.LabelFor(model => model.FirstName):
                        @Html.DisplayTextFor(m => m.FirstName)
                    </div>
                    <div class="row">
                        @Html.LabelFor(model => model.LastName):
                        @Html.DisplayTextFor(m => m.LastName)
                    </div>
                    <div class="row">
                        @Html.LabelFor(model => model.Email):
                        @Html.DisplayTextFor(m => m.Email)
                    </div>
                </div>

                @if (Model.UserName == User.Identity.Name)
                {
                    <div>
                        @Html.ActionLink("Edit Ppofile", "EditProfile", "Manage", null, new { @class = "btn btn-default pull-right" })
                    </div>
                    <div>
                        @Html.ActionLink("Change your password", "ChangePassword", "Manage", null, new { @class = "btn btn-default pull-right" })
                    </div>
                }
            </div>
        }
        else
        {
            <h1>Hmm Admin Right!</h1>
            <h2>Dont try this agan!</h2>
            <h3>Or do anithing stupid!</h3>
        }
    </div>
</div>